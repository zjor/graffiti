<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="css/styles.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>        
        <script src="https://code.jquery.com/jquery-3.4.0.min.js" crossorigin="anonymous"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>   
    </head>
<body>
    <div class="container">
        <div class="valign-wrapper">
            <div class="center-align">
                <pre id="message" class="message"></pre>
            </div>
        </div>

        <div class="fixed-action-btn">
            <a class="btn-floating btn-large red" href="/new.html">
                <i class="large material-icons">add</i>
            </a>
        </div>

    </div>
    <script type="module">
        import { b64DecodeUnicode } from './js/commons.js';

        const getMessage = () => {
            const url = new URL(window.location.href)
            const encoded = url.searchParams.get("m")
            if (encoded === undefined) {
                return "Empty message"
            } else {
                try {
                    return b64DecodeUnicode(encoded)
                } catch (err) {
                    console.log(err)
                    return "Please enter a message"
                }
            }
        }

        $(document).ready(() => {
            $("#message").text(getMessage())
        })

    </script>
</body>
</html>